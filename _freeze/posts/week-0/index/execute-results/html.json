{
  "hash": "2486dc822befc60098a525745c043a8d",
  "result": {
    "markdown": "---\ntitle: \"Getting Started\"\nsubtitle: \"Week 0\"\nauthor: \"Kyle Nessen\"\ndate: \"2024-01-03\"\ntoc: true\ncategories: []\nformat: \n   html:\n     df-print: kable\nexecute:\n  echo: false\n---\n\n\n## Purpose\n\nMatt and I met today to discuss how I can contribute to improving the [SelecTree](https://selectree.calpoly.edu/) database. What was asked of me was to explore the dataset as it stands now, find areas where we can spend useful effort, and report back with a short document. This web page serves as that report.\n\n\n\n\n\n## Import Issues\n\nInitially, I had some confusing results when trying to naively import the csv to R. The read_csv function tries to guess the data type for each column, and it did so poorly for many of them. Normally I won't show code, but I'm including a block here for future reference as I manually reviewed each column to get it to load correctly. This should hopefully save time in the future for anyone trying to recreate the import.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- treedata_20240103 <- read_csv(\"treedata_20240103.csv\", \n    col_types = cols(generic_2 = col_character(), \n        pacific_island = col_logical(), display = col_logical(), \n        california_native = col_logical(), \n        ca_invasive = col_logical(), hi_native = col_logical(), \n        invasive_text = col_character(), \n        foliage_fall_color = col_logical(), \n        fragrance = col_logical(), usda_zone = col_character(), \n        pest_resistant = col_character(), \n        deer_palatable = col_character(), \n        schoolyard = col_logical()), show_col_types = FALSE)\n```\n:::\n\n\n## Master Database Elsewhere?\n\nThe import issues and scrolling through the data makes me suspicious that this csv is a \"shadow\" of some more robust database stored elsewhere. Many of the columns, which I'll explore below, appear to extract values from database tables and transform them to fit into a typical spreadsheet.\n\nAs an example, let's look at sunset zones.\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|displayed_scientific_name |sunset_zone                                        |\n|:-------------------------|:--------------------------------------------------|\n|Abies amabilis            |3,4,5,6,7,15,16,17                                 |\n|Abies bracteata           |6,7,8,9,14,15,16,17,18,19,20,21                    |\n|Abies concolor            |1,2,3,4,5,6,7,8,9,14,15,16,17,18,19,20,21,22,23,24 |\n|Abies concolor 'Violacea' |1,2,3,4,5,6,7,8,9,14,15,16,17,18,19,20,21,22,23,24 |\n|Abies firma               |1,2,3,4,5,6,7,8,9,14,15,16,17                      |\n|Abies grandis             |1,2,3,4,5,6,7,8,9,14,15,16,17                      |\n\n</div>\n:::\n:::\n\n\nWhile these sunset zones are orderly and structured, having them listed as values separated by commas is difficult to use in any practical computer setting. For example, how would you find all trees that occur in sunset zone 5? You can't simply search for \"5\" in the column, as zone 15 exists.\n\nA more practical way to address this type of information is to make a table entirely dedicated to sunset zones, where each zone gets a unique column. The value for each that column is simply `true` or `false`, accompanied by the species name or tree ID:\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|displayed_scientific_name |zone_1 |zone_2 |zone_3 |zone_4 |zone_5 |zone_6 |zone_7 |zone_8 |zone_9 |zone_10 |zone_11 |zone_12 |zone_13 |zone_14 |zone_15 |zone_16 |zone_17 |zone_18 |zone_19 |zone_20 |zone_21 |zone_22 |zone_23 |zone_24 |\n|:-------------------------|:------|:------|:------|:------|:------|:------|:------|:------|:------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|:-------|\n|Abies amabilis            |FALSE  |FALSE  |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |FALSE  |FALSE  |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |\n|Abies bracteata           |FALSE  |FALSE  |FALSE  |FALSE  |FALSE  |TRUE   |TRUE   |TRUE   |TRUE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |FALSE   |FALSE   |FALSE   |\n|Abies concolor            |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |\n|Abies concolor 'Violacea' |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |TRUE    |\n|Abies firma               |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |TRUE    |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |\n|Abies grandis             |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |TRUE   |FALSE   |FALSE   |FALSE   |FALSE   |TRUE    |TRUE    |TRUE    |TRUE    |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |FALSE   |\n\n</div>\n:::\n:::\n\n\nThis way you can simply filter by the zone you're interested in. In excel, you would simply filter out all `false` values in the `zone_5` column.\n\nI strongly suspect a table like this exists somewhere, and someone wrote a bit of code to condense into the comma separated list you see in the export. And if that is not the case, it really should be.\n\n::: callout-tip\n## Possible Directions\n\n1.  I could work on updating this fully expanded table for all species by scraping some online data source. At the very least, I can search for species that do not have this information.\n\n2.  We could meet with the data people to see if they have a table like this already, and if not, we could work with them to create one. Alternatively, I can make a tool for you to expand this table as needed.\n:::\n\nMany other columns fall into this table-compressed-to-a-column category. Essentially any column that contains (or can contain) multiple pieces of information within the same cell. Below I list the columns that I found which I believe should be expanded to separate tables:\n\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Expandable Columns\n\n|                       |                      |                    |\n|:----------------------|:---------------------|:-------------------|\n|attracts_wildlife      |foliage_growth_color  |pest_resistant      |\n|bark_color             |fruit_value           |pest_susceptibility |\n|bark_texture           |fruiting_time         |photolocations      |\n|disease_resistant      |health_hazard         |soil_texture        |\n|disease_susceptibility |landscape_application |sunset_zone         |\n|flower_color           |landscape_use         |tree_shape          |\n|flower_time            |litter_type           |usda_zone           |\n|foliage_fall_color     |native_range          |                    |\n:::\n:::\n\n\n::: callout-tip\n## Possible Directions\n\nEach column presents a new effort for documenting tree characteristics. We could explore which columns are highest priority.\n:::\n\n## Missing Data\n\nI believe a complete table should have no empty cells. As it stands now, most of the columns are incomplete. I've generated a table below that shows what percentage of the cells have values for each column.\n\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Column Completeness by Percentage\n\n|Column                    |     %|Column                   |    %|\n|:-------------------------|-----:|:------------------------|----:|\n|display                   | 100.0|usda_zone                | 92.4|\n|displayed_scientific_name | 100.0|growth_rate_low          | 92.3|\n|family                    | 100.0|width_low                | 92.2|\n|hi_native                 | 100.0|bark_color               | 91.2|\n|pacific_island            | 100.0|bark_texture             | 90.0|\n|schoolyard                | 100.0|flower_time              | 88.6|\n|tree_id                   | 100.0|root_damage_potential    | 87.6|\n|ca_invasive               |  99.9|fruiting_time            | 87.5|\n|california_native         |  99.9|saltspray_tolerance      | 81.3|\n|displayed_common_name     |  99.9|photolocations           | 81.2|\n|leaf_form                 |  99.9|flower_showiness         | 77.8|\n|native_range              |  99.9|litter_type              | 77.1|\n|leaf_arrangement          |  99.8|landscape_application    | 76.1|\n|height_high               |  99.5|branch_strength_high     | 72.1|\n|foliage_type              |  99.4|branch_strength_low      | 72.1|\n|height_low                |  99.4|health_hazard            | 71.9|\n|water_use                 |  99.0|flower_color             | 68.7|\n|memo                      |  98.9|disease_susceptibility   | 67.0|\n|exposure_high             |  98.8|pest_susceptibility      | 64.2|\n|exposure_low              |  98.8|attracts_wildlife        | 60.3|\n|tree_shape                |  98.3|alternative_common_names | 52.1|\n|foliage_fall_color        |  98.0|flower_type              | 51.6|\n|planting_area             |  97.7|synonyms                 | 35.4|\n|foliage_growth_color      |  96.9|app_grrating             | 32.5|\n|soil_texture              |  96.5|app_lcant                | 32.5|\n|fruit_type                |  96.4|appraisal                | 32.5|\n|sunset_zone               |  96.3|disease_resistant        | 31.2|\n|generic_1                 |  96.0|landscape_use            | 29.6|\n|soil_ph_high              |  95.8|fruit_value              | 28.5|\n|soil_ph_low               |  95.8|deer_palatable           | 26.8|\n|fragrance                 |  95.5|salinity_tolerance       | 26.0|\n|leaflet_shape             |  95.3|biogenic_emissions       | 16.7|\n|width_high                |  92.7|ethnobotanical_info      | 10.7|\n|fruit_color               |  92.5|invasive_text            |  3.4|\n|growth_rate_high          |  92.5|pest_resistant           |  1.4|\n|fruit_size                |  92.4|generic_2                |  0.3|\n:::\n:::\n\n\n::: callout-tip\n## Possible Directions\n\n1.  I could generate lists of species that have missing values for each column, and get your undergrad to help find the missing info\n2.  We could focus on finishing many of the near complete columns\n3.  Or rank these columns based on priority and make progress on underrepresented information\n:::\n\n## Extra Spaces in Names\n\nWhen we first looked at this dataset, I noticed there was some weird things happening with the names. Specifically, extra spaces were finding their way into the names. I've copied a list of names that have additional spaces, which I have confirmed carries through to the website. I'm sure it's a pretty easy fix on their end. These are all additional spaces between the genus and specific epithet.\n\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Names with Spacing Issues\n\n|                         |                         |\n|:------------------------|:------------------------|\n|Andira  inermis          |Fagraea  fragrans        |\n|Areca  vestiaria         |Ficus  dammaropsis       |\n|Butea  monosperma        |Ficus  pseudopalma       |\n|Callistemon  brachyandra |Malosma  laurina         |\n|Cornus  nutallii         |Plerandra  elegantissima |\n|Elaeis  guineensis       |Vitex  trifolia          |\n:::\n:::\n\n\n::: callout-tip\n## Possible Directions\n\nSend this list to web site maintainers to fix.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}