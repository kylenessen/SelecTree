{
  "hash": "692c922276c992610b62ddb012f5c17a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Common Names Continued, Embeddings\"\nsubtitle: \"Week 4\"\nauthor: \"Kyle Nessen\"\ndate: \"2024-02-07\"\ntoc: true\ncategories: []\nformat: \n   html:\n     df-print: kable\nexecute:\n  echo: false\n  warning: false\n---\n\n\n## Previous week notes\n\n-   Matt was happy to include as many common names as possible.\n-   I said I would go through and do some more clean up before shipping a completed list to Logan.\n-   Matt wanted me to keep in mind the project to create our own name parser for urban trees.\n\n## Clean up notes\n\nLast week I presented `9,988` common names for all SelecTree species. This includes existing and new names from GBIF. However, a quick inspection indicated that a lot of those names are false duplicates. For example **WHITE FIR** and **WHITE-FIR** may look different to the computer, but are actually essentially duplicates of the same name. For the dashed names, I reviewed about 300 names before making the call to do a find a replace on the whole dataset. This dropped the total names by about `~3,000` alone.\n\nThere were also some other anomalies from GBIF, including multiple names separated by a comma on the same line. I dealt with these as well.\n\nSome of the existing common names had a mix of upper and lower case. I've fixed that in this iteration so all names are now upper case.\n\nIn the end, this brought the total number of names (both existing and new) down to `6,518`. Much better!\n\n## Embeddings\n\nNot content to leave it there, I used AI to help surface additional duplicate names.\n\nI did this by using [word embedding](https://en.wikipedia.org/wiki/Word_embedding) to essentially translate the common name to a numerical vector. This allows me to calculate the similarity to other common names as a single score between 0 (no similarity) and 1 (identical).\n\nIt's important to note that this is a semantic similarity, which goes deeper than surface level comparisons. For example, **DUTCH ELM** and **HOLLAND ELM** have a similarity score of `0.89`. While **PUNK TREE** and **MELALEUCA** have a similarity score of `0.21`.\n\nHere's a random sample of 25 common names and their most similar pair.\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|Scientific Name          |Common Name               |Most Similar Name       | Similarity Score|\n|:------------------------|:-------------------------|:-----------------------|----------------:|\n|Agathis robusta          |AUSTRALIAN KAURI          |SMOOTHBARK KAURI        |        0.5556556|\n|Cotoneaster salicifolius |WILLOW LEAVED COTONEASTER |WILLOW LEAF COTONEASTER |        0.9353113|\n|Malus sylvestris         |EUROPEAN CRAB APPLE       |EUROPEAN WILD APPLE     |        0.7778924|\n|Syzygium cumini          |PORTUGUESE PLUM           |DUBAT                   |        0.2633872|\n|Corymbia citriodora      |LEMON SCENT GUM           |LEMON SCENTED GUM       |        0.9833951|\n|Amelanchier canadensis   |EASTERN SERVICEBERRY      |CANADIAN SERVICEBERRY   |        0.6838179|\n|Moringa oleifera         |DRUMSTICKTREE             |HORSERADISHTREE         |        0.4749083|\n|Cornus florida           |FLORIDA DOGWOOD           |WHITE CORNEL            |        0.3870133|\n|Casuarina equisetifolia  |SHE OAK                   |POLYNESIAN IRONWOOD     |        0.4099975|\n|Quercus turbinella       |SONORAN SCRUB OAK         |DESERT SCRUB OAK        |        0.7632381|\n|Aleurites moluccanus     |CANDLEBERRY               |LUMBANG                 |        0.2996362|\n|Ficus aurea              |FLORIDA STRANGLER FIG     |GOLDEN FIG              |        0.4919955|\n|Agonis flexuosa          |WESTERN AUSTRALIAN MYRTLE |WILLOW PEPPERMINT       |        0.4268756|\n|Thespesia populnea       |QUILULU                   |AMAE                    |        0.2472749|\n|Cordia sebestena         |BROADLEAF                 |KELAU                   |        0.2150219|\n|Araucaria cunninghamii   |RICHMOND RIVER PINE       |HOOP PINE               |        0.5784520|\n|Morinda citrifolia       |NGEL                      |NOPURNEN                |        0.2878066|\n|Casuarina equisetifolia  |WHISTLINGTREE             |WEHKU                   |        0.2106916|\n|Libidibia ferrea         |MORADA                    |LEOPARD TREE            |        0.2191152|\n|Phillyrea latifolia      |GREEN OLIVE TREE          |MOCK PRIVET             |        0.3954378|\n|Syzygium malaccense      |OTAHEITE APPLE            |FAARIYAP                |        0.3210089|\n|Pandanus tectorius       |TAHITIAN SCREWPINE        |KAFU                    |        0.2487246|\n|Lagunaria patersonia     |WHITEWOOD                 |PRIMROSE TREE           |        0.3828147|\n|Eucalyptus bridgesiana   |APPLEBOX                  |SWAMP APPLE             |        0.5530319|\n|Casuarina equisetifolia  |BEACH CASUARINA           |HORSETAILTREE           |        0.3071727|\n\n</div>\n:::\n:::\n\n\nI've made another Google Sheet with the full list of comparison, with the most similar (and most likely to be a duplicate) at the top. I've also added check boxes for names that should be ***removed.*** If there's no check box, I'll assume it's good to keep. If you want me to keep everything, great. Or we can review till we get tired of it. Just let me know how to proceed.\n\n\n```{=html}\n<div style=\"text-align: center;\">\n    <a href=\"https://docs.google.com/spreadsheets/d/1RLxf8dbUFPRT7He7yXrWk8dn5Ii2xWuV2bJvK2pTOB0/edit?usp=sharing\" target=\"_blank\" style=\"background-color: #4CAF50; /* Green */\n        border: none;\n        color: white;\n        padding: 20px 40px; /* Size of the button */\n        text-align: center;\n        text-decoration: none;\n        display: inline-block;\n        font-size: 16px; /* Font size */\n        margin: 4px 2px;\n        cursor: pointer;\n        border-radius: 12px;\">SelecTree - Similar Common Names</a>\n</div>\n```\n\n### Other uses for embedding\n\nThis may be an over-engineered solution for a list of common names, but I think it was a useful exercise. There are genuine duplicates in that list that would have been otherwise difficult to catch.\n\nAdditionally, embeddings can be used to do robust fuzzy matching on names inputted by users. This could be useful for our name parser service, and I don't think any of the other common services (like [TNRS](https://tnrs.biendata.org/)) are using this particular technique. I believe they are using older natural language processing methods.\n\n## Synonyms\n\nNext week I'll repeat the work I did for common names but for taxonomic synonyms. Please let me know if there's another area I should focus.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}